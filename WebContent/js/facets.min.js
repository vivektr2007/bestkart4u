function get_json(a,b,c){var c=c||{};$.ajax({url:a,type:b,data:c,success:function(d){return d}})}function is_str_empty(a){return facets.facet_data.facets.replace(/\s/g,"")==""}function capitalise_string(a){return a.charAt(0).toUpperCase()+a.slice(1)}function toTitleCase(a){return a.replace(/\w\S*/g,function(b){return b.charAt(0).toUpperCase()+b.substr(1).toLowerCase()})}$.extend($.expr[":"],{"starts-with":function(c,b,d,f){var e=$.trim($(c).text()),a=d[3];return e.indexOf(a)===0},"ends-with":function(c,b,d,f){var e=$.trim($(c).text()),a=d[3];return e.lastIndexOf(a)===e.length-a.length}});function filter_facets(b){var a=$("#"+b).val();$("."+b+"_item").hide();if(a!=""){a=capitalise_string(a);if(b=="filter_packsizes"){var c=$("#"+b+"_list").find("label:contains('"+a+"')")}else{var c=$("#"+b+"_list").find("label:starts-with('"+a+"')")}c.each(function(){$(this).parent().show()})}else{$("."+b+"_item").show()}}function Facets(a,c,b){this.sid=a;this.previous_sid=null;this.mode=c;this.enable_analytics=b=="True"?true:false}Facets.prototype.get_page=function(b,d,c,a){c=c||false;a=a||false;$("#facet-loading-wrap").show();d.sid=facets.sid;$.ajax({url:b,type:"get",data:d,success:function(e){facets.facet_data=e;facets.update_display(c,a);$("#uiv2-num-products").empty().html(e.num_products);$("#facet-loading-wrap").hide()},error:function(f,e,g){if(f.status==500){$("#facet-loading-wrap").hide();alert("Sorry.. Error getting products")}}})};Facets.prototype.update_category_urls=function(){if(facets.mode!=4&&facets.mode!=2&&location.pathname.split("/")[1]!="sp"&&$.query.get("q")==""){var a=location.search;$(".category-url").each(function(){$(this).attr("href",$(this).attr("href")+"&sid="+facets.sid)})}};Facets.prototype.highlight_checkboxes=function(){try{$("input:checkbox:checked.fchkbox").parent().parent().find("span.bb-bname").addClass("checked")}catch(a){console.log("Error selecting checkbox "+a)}};Facets.prototype.update_display=function(b,a){if(b){if(!is_str_empty(facets.facet_data.facets)){$("#facetsContainer").empty().html(facets.facet_data.facets)}if(!is_str_empty(facets.facet_data.filters)){$("#filter-bar-container").empty().html(facets.facet_data.filters)}}facets.previous_sid=facets.sid;facets.sid=facets.facet_data.sid;$("#products-container").empty().html(facets.facet_data.products);$(".paginationArea").empty().html(facets.facet_data.pagination);init_display_child_product($("#static-url").val());init_a2c($("#max-qty").val());facets.update_sid();facets.update_category_urls();if($("#refineBy").html()==""){$("#facetsRefine").hide()}else{$("#facetsRefine").show()}if($(".parentchild").dropkick!=undefined){$(".parentchild").dropkick(dropkick_change);set_dropkick_width();$(".dk_options_inner li a").highlight("Rs.",{element:"span",className:"WebRupee"})}if($(".id_psort").dropkick!=undefined){$(".id_psort").dropkick(dropkick_sort_change)}$(".uiv2-brands_Listing ul").jScrollPane()};function isIE(){var a=navigator.userAgent.toLowerCase();return(a.indexOf("msie")!=-1)?parseInt(a.split("msie")[1]):false}Facets.prototype.update_sid=function(){if(facets.sid!=facets.previous_sid){window.history.pushState({sid:facets.sid},document.title,$.query.set("sid",facets.sid))}};Facets.prototype.init=function(){this.update_sid();this.update_category_urls();$(".uiv2-brands_Listing ul").jScrollPane()};Facets.prototype.sort=function(a){var b=a.value;this.get_page("/product/facet/sort/",{sid:facets.sid,o:b})};Facets.prototype.show_page=function(a){this.get_page("/product/facet/get-page/",{sid:facets.sid,page:a})};Facets.prototype.clear_filters=function(b){b=b||false;if(!b){var a=$.query.remove("sid");if(a==""){location.href=[location.protocol,"//",location.host,location.pathname].join("")}else{location.href=a}}else{this.get_page("/product/facet/clear-filter/",{sid:facets.sid,filter:b},true,true)}};Facets.prototype.apply_filter=function(a,d,b){var c=true;if(!b||!b.checked){c=false}this.get_page("/product/facet/apply-filter/",{sid:facets.sid,filter_type:a,filter:d,apply:c},true,true)};Facets.prototype.add_filter=function(a,b){this.get_page("/product/facet/apply-filter/",{sid:facets.sid,filter_type:a,filter:b,apply:true},true,true)};Facets.prototype.send_analytics=function(c,d,b,a){if(!a){d=d+" # apply"}else{if(a.checked){d=d+" # apply"}else{d=d+" # unapply"}}if(facets.enable_analytics){_gaq.push(["_trackEvent",c,d,b])}};function init_facets(a,c,b){window.facets=new Facets(a,c,b);window.sids=new Array();facets.init()};